<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Book a Free Estimate | Surprise Granite</title>
  <meta name="description" content="Schedule your free in-home estimate for countertops, tile, and flooring. Pick a date and time that works for you."/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="canonical" href="https://surprisegranite.com/book/"/>
  <link href="https://cdn.prod.website-files.com/6456ce4476abb25581fbad0c/6456ce4476abb269c6fbb176_Surprise-Granite-favicon-32x32px.png" rel="shortcut icon" type="image/x-icon"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>

  <!-- Unified Navigation -->
  <link rel="stylesheet" href="../css/unified-nav.css?v=20260113">
  <script defer src="../js/unified-nav.js?v=20260113"></script>

  <style>
    :root {
      --gold: #f9cb00;
      --gold-dark: #cca600;
      --dark: #0a0a0a;
      --surface: #1a1a1a;
      --surface-elevated: #242424;
      --border: rgba(255,255,255,0.1);
      --text: #ffffff;
      --text-secondary: rgba(255,255,255,0.7);
      --text-muted: rgba(255,255,255,0.5);
      --success: #22c55e;
      --error: #ef4444;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    /* Unified nav height for positioning */
    :root {
      --unified-nav-height: 155px;
    }

    @media (max-width: 991px) {
      :root {
        --unified-nav-height: 64px;
      }
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
      background: var(--dark);
      color: var(--text);
      min-height: 100vh;
      line-height: 1.5;
      padding-top: var(--unified-nav-height); /* Space for fixed unified nav */
    }

    .book-header {
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      padding: 20px 24px;
      margin-top: 20px; /* Extra spacing below unified nav */
    }

    .book-header-inner {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .book-logo {
      display: flex;
      align-items: center;
      gap: 12px;
      text-decoration: none;
      color: var(--text);
    }

    .book-logo-icon {
      width: 40px;
      height: 40px;
    }

    .book-logo-text {
      font-weight: 700;
      font-size: 18px;
    }

    .book-back {
      display: flex;
      align-items: center;
      gap: 6px;
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 14px;
      font-weight: 500;
      padding: 8px 16px;
      border-radius: 8px;
      transition: all 0.2s;
    }

    .book-back:hover {
      background: var(--surface-elevated);
      color: var(--text);
    }

    /* Main Content */
    .book-main {
      max-width: 900px;
      margin: 0 auto;
      padding: 40px 24px 80px;
    }

    .book-title {
      text-align: center;
      margin-bottom: 40px;
    }

    .book-title h1 {
      font-size: 32px;
      font-weight: 800;
      margin-bottom: 12px;
    }

    .book-title p {
      font-size: 16px;
      color: var(--text-secondary);
      max-width: 500px;
      margin: 0 auto;
    }

    /* Trust Badges */
    .trust-badges {
      display: flex;
      justify-content: center;
      gap: 24px;
      margin-top: 24px;
      flex-wrap: wrap;
    }

    .trust-badge {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      font-weight: 600;
      color: var(--text-secondary);
    }

    .trust-badge svg {
      color: var(--gold);
    }

    /* Urgency Banner */
    .urgency-banner {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      background: linear-gradient(135deg, rgba(249, 203, 0, 0.15) 0%, rgba(249, 203, 0, 0.05) 100%);
      border: 1px solid rgba(249, 203, 0, 0.3);
      border-radius: 12px;
      padding: 12px 20px;
      margin-bottom: 24px;
      font-size: 14px;
      color: var(--text-secondary);
    }

    .urgency-banner svg {
      color: var(--gold);
      flex-shrink: 0;
    }

    .urgency-banner strong {
      color: var(--gold);
    }

    /* Privacy Note */
    .privacy-note {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 16px;
      margin-bottom: 8px;
    }

    .privacy-note svg {
      flex-shrink: 0;
      opacity: 0.6;
    }

    /* Progress Steps */
    .book-progress {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-bottom: 40px;
    }

    .progress-step {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 600;
      background: var(--surface);
      color: var(--text-muted);
    }

    .progress-step.active {
      background: var(--gold);
      color: #000;
    }

    .progress-step.completed {
      background: var(--success);
      color: #fff;
    }

    .progress-step .step-num {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: rgba(255,255,255,0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
    }

    .progress-step.active .step-num {
      background: rgba(0,0,0,0.2);
    }

    /* Form Sections */
    .book-section {
      display: none;
      animation: fadeIn 0.3s ease;
    }

    .book-section.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Calendar */
    .calendar-container {
      background: var(--surface);
      border-radius: 20px;
      padding: 24px;
      margin-bottom: 24px;
    }

    .calendar-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 24px;
    }

    .calendar-month {
      font-size: 20px;
      font-weight: 700;
    }

    .calendar-nav {
      display: flex;
      gap: 8px;
    }

    .calendar-nav button {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--text);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .calendar-nav button:hover {
      background: var(--surface-elevated);
      border-color: var(--gold);
    }

    .calendar-nav button:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .calendar-weekdays {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 4px;
      margin-bottom: 8px;
    }

    .calendar-weekday {
      text-align: center;
      font-size: 12px;
      font-weight: 600;
      color: var(--text-muted);
      padding: 8px;
    }

    .calendar-days {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 6px;
      min-height: 300px;
    }

    .calendar-day {
      aspect-ratio: 1;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: var(--surface-elevated);
      color: var(--text);
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 48px;
    }

    .calendar-day:hover:not(:disabled):not(.selected) {
      background: rgba(249, 203, 0, 0.15);
      border-color: var(--gold);
    }

    .calendar-day.today {
      border: 2px solid var(--gold);
      background: rgba(249, 203, 0, 0.1);
    }

    .calendar-day.selected {
      background: var(--gold);
      color: #000;
      font-weight: 700;
      border-color: var(--gold);
    }

    .calendar-day:disabled {
      opacity: 0.4;
      cursor: not-allowed;
      background: var(--surface);
    }

    .calendar-day.other-month {
      opacity: 0.3;
      background: transparent;
      border-color: transparent;
    }

    /* Time Slots */
    .time-slots-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 16px;
      color: var(--text-secondary);
    }

    .time-slots {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      gap: 10px;
    }

    .time-slot {
      padding: 14px 16px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--text);
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
    }

    .time-slot:hover:not(.selected):not(:disabled) {
      border-color: var(--gold);
      background: rgba(249, 203, 0, 0.1);
    }

    .time-slot.selected {
      background: var(--gold);
      color: #000;
      border-color: var(--gold);
      font-weight: 600;
    }

    .time-slot:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    /* Form Fields */
    .form-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }

    @media (max-width: 600px) {
      .form-grid {
        grid-template-columns: 1fr;
      }
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .form-group.full-width {
      grid-column: 1 / -1;
    }

    .form-label {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-secondary);
    }

    .form-label .required {
      color: var(--error);
    }

    .form-input,
    .form-select,
    .form-textarea {
      padding: 14px 16px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: var(--surface);
      color: var(--text);
      font-size: 15px;
      font-family: inherit;
      transition: all 0.2s;
    }

    .form-input:focus,
    .form-select:focus,
    .form-textarea:focus {
      outline: none;
      border-color: var(--gold);
      box-shadow: 0 0 0 3px rgba(249, 203, 0, 0.2);
    }

    .form-textarea {
      min-height: 120px;
      resize: vertical;
    }

    .form-select {
      cursor: pointer;
    }

    /* Buttons */
    .book-buttons {
      display: flex;
      gap: 12px;
      margin-top: 32px;
    }

    .book-btn {
      flex: 1;
      padding: 16px 24px;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      border: none;
    }

    .book-btn.primary {
      background: var(--gold);
      color: #000;
    }

    .book-btn.primary:hover {
      background: var(--gold-dark);
      transform: translateY(-2px);
    }

    .book-btn.primary:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .book-btn.secondary {
      background: var(--surface);
      color: var(--text);
      border: 1px solid var(--border);
    }

    .book-btn.secondary:hover {
      background: var(--surface-elevated);
    }

    /* Summary Card */
    .summary-card {
      background: var(--surface);
      border-radius: 20px;
      padding: 24px;
      margin-bottom: 24px;
    }

    .summary-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .summary-title svg {
      color: var(--gold);
    }

    .summary-row {
      display: flex;
      justify-content: space-between;
      padding: 12px 0;
      border-bottom: 1px solid var(--border);
    }

    .summary-row:last-child {
      border-bottom: none;
    }

    .summary-label {
      color: var(--text-muted);
      font-size: 14px;
    }

    .summary-value {
      font-weight: 600;
      font-size: 14px;
    }

    /* Success Screen */
    .success-container {
      text-align: center;
      padding: 60px 24px;
    }

    .success-icon {
      width: 80px;
      height: 80px;
      background: var(--success);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 24px;
    }

    .success-icon svg {
      width: 40px;
      height: 40px;
      color: #fff;
    }

    .success-title {
      font-size: 28px;
      font-weight: 800;
      margin-bottom: 12px;
    }

    .success-message {
      font-size: 16px;
      color: var(--text-secondary);
      max-width: 400px;
      margin: 0 auto 32px;
    }

    .success-details {
      background: var(--surface);
      border-radius: 16px;
      padding: 24px;
      max-width: 400px;
      margin: 0 auto 32px;
      text-align: left;
    }

    .success-detail {
      display: flex;
      gap: 12px;
      padding: 12px 0;
      border-bottom: 1px solid var(--border);
    }

    .success-detail:last-child {
      border-bottom: none;
    }

    .success-detail-icon {
      width: 40px;
      height: 40px;
      background: rgba(249, 203, 0, 0.1);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .success-detail-icon svg {
      width: 20px;
      height: 20px;
      color: var(--gold);
    }

    .success-detail-text {
      flex: 1;
    }

    .success-detail-label {
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: 2px;
    }

    .success-detail-value {
      font-weight: 600;
    }

    /* What's Next Section */
    .whats-next {
      background: var(--surface);
      border-radius: 16px;
      padding: 24px;
      max-width: 400px;
      margin: 0 auto 32px;
      text-align: left;
    }

    .whats-next h3 {
      font-size: 16px;
      font-weight: 700;
      margin-bottom: 16px;
      text-align: center;
      color: var(--text);
    }

    .next-steps {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .next-step {
      display: flex;
      align-items: flex-start;
      gap: 12px;
    }

    .next-step-num {
      width: 24px;
      height: 24px;
      background: var(--gold);
      color: #000;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: 700;
      flex-shrink: 0;
    }

    .next-step-text {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.5;
    }

    .success-actions {
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    /* Loading Spinner */
    .spinner {
      width: 20px;
      height: 20px;
      border: 2px solid transparent;
      border-top-color: currentColor;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Mobile */
    @media (max-width: 600px) {
      .book-main {
        padding: 24px 16px 60px;
      }

      .book-title h1 {
        font-size: 24px;
      }

      .progress-step span {
        display: none;
      }

      .calendar-day {
        font-size: 13px;
      }

      .time-slots {
        grid-template-columns: repeat(3, 1fr);
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="book-header">
    <div class="book-header-inner">
      <a href="/" class="book-logo">
        <!-- Surprise Granite Yellow House Icon -->
        <svg class="book-logo-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 390 402" width="40" height="41" fill="#f9cb00">
          <g transform="translate(0.269 0.052)">
            <path d="M194.6,32.106l166.79,96.3V373.463H27.807V128.406l166.79-96.3M194.6,0,0,112.353V401.271H389.213V112.353L194.6,0Z"/>
            <path d="M257.77,133.82,87.52,34.06,61.3,51.7l168.663,98.173V374.579H257.77Z" transform="translate(48.039 26.692)"/>
            <path d="M212.1,353.7H184.292V177.137L13.15,78.323,41.207,60.7,212.1,161.085Z" transform="translate(10.305 47.568)"/>
            <path d="M129.182,173.571,12.53,106.22v32.106l88.862,51.3V318.03h27.789Z" transform="translate(9.819 83.241)"/>
          </g>
        </svg>
        <div style="display: flex; flex-direction: column;">
          <span class="book-logo-text">SURPRISE GRANITE</span>
          <span style="font-size: 10px; font-weight: 600; color: #f9cb00; letter-spacing: 1.5px; margin-top: -2px;">MARBLE & QUARTZ</span>
        </div>
      </a>
      <a href="/" class="book-back">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
        Back to Home
      </a>
    </div>
  </header>

  <!-- Main Content -->
  <main class="book-main">
    <div class="book-title">
      <h1>Schedule Your Free Estimate</h1>
      <p>Pick a date and time that works for you. We'll come to your home and provide a detailed quote.</p>

      <!-- Trust Badges -->
      <div class="trust-badges">
        <div class="trust-badge">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
            <path d="M9 12l2 2 4-4"/>
          </svg>
          <span>100% Free</span>
        </div>
        <div class="trust-badge">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <polyline points="12 6 12 12 16 14"/>
          </svg>
          <span>30-Min Consultation</span>
        </div>
        <div class="trust-badge">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"/>
          </svg>
          <span>No Obligation</span>
        </div>
      </div>
    </div>

    <!-- Progress Steps -->
    <div class="book-progress">
      <div class="progress-step active" data-step="1">
        <span class="step-num">1</span>
        <span>Date & Time</span>
      </div>
      <div class="progress-step" data-step="2">
        <span class="step-num">2</span>
        <span>Your Info</span>
      </div>
      <div class="progress-step" data-step="3">
        <span class="step-num">3</span>
        <span>Confirm</span>
      </div>
    </div>

    <!-- Step 1: Date & Time -->
    <section class="book-section active" id="step1">
      <!-- Urgency Banner -->
      <div class="urgency-banner">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
        </svg>
        <span><strong>Limited Availability</strong> â€” Book now to secure your preferred time slot</span>
      </div>

      <div class="calendar-container">
        <div class="calendar-header">
          <span class="calendar-month" id="calendarMonth"></span>
          <div class="calendar-nav">
            <button id="prevMonth" aria-label="Previous month">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M15 18l-6-6 6-6"/>
              </svg>
            </button>
            <button id="nextMonth" aria-label="Next month">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 18l6-6-6-6"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="calendar-weekdays">
          <div class="calendar-weekday">Sun</div>
          <div class="calendar-weekday">Mon</div>
          <div class="calendar-weekday">Tue</div>
          <div class="calendar-weekday">Wed</div>
          <div class="calendar-weekday">Thu</div>
          <div class="calendar-weekday">Fri</div>
          <div class="calendar-weekday">Sat</div>
        </div>
        <div class="calendar-days" id="calendarDays"></div>
      </div>

      <div id="timeSlots" style="display:none;">
        <p class="time-slots-title">Available times for <span id="selectedDateText"></span></p>
        <div class="time-slots" id="timeSlotsGrid"></div>
      </div>

      <div class="book-buttons">
        <button class="book-btn primary" id="toStep2" disabled>
          Continue
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M5 12h14M12 5l7 7-7 7"/>
          </svg>
        </button>
      </div>
    </section>

    <!-- Step 2: Contact Info -->
    <section class="book-section" id="step2">
      <div class="summary-card">
        <div class="summary-title">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
            <line x1="16" y1="2" x2="16" y2="6"/>
            <line x1="8" y1="2" x2="8" y2="6"/>
            <line x1="3" y1="10" x2="21" y2="10"/>
          </svg>
          Selected Appointment
        </div>
        <div class="summary-row">
          <span class="summary-label">Date</span>
          <span class="summary-value" id="summaryDate">-</span>
        </div>
        <div class="summary-row">
          <span class="summary-label">Time</span>
          <span class="summary-value" id="summaryTime">-</span>
        </div>
      </div>

      <div class="form-grid">
        <div class="form-group">
          <label class="form-label">Full Name <span class="required">*</span></label>
          <input type="text" class="form-input" id="inputName" placeholder="John Smith" required>
        </div>
        <div class="form-group">
          <label class="form-label">Phone <span class="required">*</span></label>
          <input type="tel" class="form-input" id="inputPhone" placeholder="(555) 123-4567" required>
        </div>
        <div class="form-group full-width">
          <label class="form-label">Email <span class="required">*</span></label>
          <input type="email" class="form-input" id="inputEmail" placeholder="john@example.com" required>
        </div>
        <!-- Service/Project Address Section -->
        <div class="form-group full-width" style="margin-top: 8px;">
          <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid rgba(255,255,255,0.1);">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#f9cb00" stroke-width="2">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/>
              <circle cx="12" cy="10" r="3"/>
            </svg>
            <span style="font-size: 13px; font-weight: 600; color: #f9cb00; text-transform: uppercase; letter-spacing: 0.5px;">Service Address</span>
          </div>
          <div class="form-grid" style="gap: 12px;">
            <div class="form-group" style="flex: 2; margin-bottom: 0;">
              <label class="form-label">Street Address <span class="required">*</span></label>
              <input type="text" class="form-input" id="inputStreet" placeholder="123 Main St" required>
            </div>
            <div class="form-group" style="flex: 1; margin-bottom: 0;">
              <label class="form-label">Unit/Apt</label>
              <input type="text" class="form-input" id="inputStreet2" placeholder="Apt 4B">
            </div>
          </div>
          <div class="form-grid" style="gap: 12px; margin-top: 12px;">
            <div class="form-group" style="flex: 2; margin-bottom: 0;">
              <label class="form-label">City <span class="required">*</span></label>
              <input type="text" class="form-input" id="inputCity" placeholder="Surprise" required>
            </div>
            <div class="form-group" style="flex: 1; margin-bottom: 0;">
              <label class="form-label">State</label>
              <select class="form-select" id="inputState">
                <option value="AZ" selected>AZ</option>
                <option value="CA">CA</option>
                <option value="CO">CO</option>
                <option value="NV">NV</option>
                <option value="NM">NM</option>
                <option value="TX">TX</option>
                <option value="UT">UT</option>
              </select>
            </div>
            <div class="form-group" style="flex: 1; margin-bottom: 0;">
              <label class="form-label">ZIP <span class="required">*</span></label>
              <input type="text" class="form-input" id="inputZip" placeholder="85374" maxlength="5" required>
            </div>
          </div>
          <!-- Hidden field for backward compatibility -->
          <input type="hidden" id="inputAddress">
        </div>

        <div class="form-group">
          <label class="form-label">Project Type</label>
          <select class="form-select" id="inputProjectType">
            <option value="">Select...</option>
            <option value="kitchen">Kitchen Countertops</option>
            <option value="bathroom">Bathroom Vanity</option>
            <option value="outdoor">Outdoor Kitchen</option>
            <option value="flooring">Flooring</option>
            <option value="tile">Tile/Backsplash</option>
            <option value="other">Other</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Estimated Square Feet</label>
          <input type="text" class="form-input" id="inputSqft" placeholder="e.g., 40">
        </div>
        <div class="form-group full-width">
          <label class="form-label">Additional Notes</label>
          <textarea class="form-textarea" id="inputNotes" placeholder="Tell us about your project, material preferences, or any questions..."></textarea>
        </div>
      </div>

      <!-- Privacy Note -->
      <div class="privacy-note">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
          <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
        </svg>
        <span>Your information is secure and will never be shared with third parties.</span>
      </div>

      <div class="book-buttons">
        <button class="book-btn secondary" id="backToStep1">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back
        </button>
        <button class="book-btn primary" id="toStep3">
          Review & Confirm
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M5 12h14M12 5l7 7-7 7"/>
          </svg>
        </button>
      </div>
    </section>

    <!-- Step 3: Confirmation -->
    <section class="book-section" id="step3">
      <div class="summary-card">
        <div class="summary-title">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 11l3 3L22 4"/>
            <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/>
          </svg>
          Appointment Summary
        </div>
        <div class="summary-row">
          <span class="summary-label">Date</span>
          <span class="summary-value" id="confirmDate">-</span>
        </div>
        <div class="summary-row">
          <span class="summary-label">Time</span>
          <span class="summary-value" id="confirmTime">-</span>
        </div>
        <div class="summary-row">
          <span class="summary-label">Name</span>
          <span class="summary-value" id="confirmName">-</span>
        </div>
        <div class="summary-row">
          <span class="summary-label">Phone</span>
          <span class="summary-value" id="confirmPhone">-</span>
        </div>
        <div class="summary-row">
          <span class="summary-label">Email</span>
          <span class="summary-value" id="confirmEmail">-</span>
        </div>
        <div class="summary-row">
          <span class="summary-label">Address</span>
          <span class="summary-value" id="confirmAddress">-</span>
        </div>
        <div class="summary-row">
          <span class="summary-label">Project</span>
          <span class="summary-value" id="confirmProject">-</span>
        </div>
      </div>

      <div class="book-buttons">
        <button class="book-btn secondary" id="backToStep2">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back
        </button>
        <button class="book-btn primary" id="submitBooking">
          <span id="submitText">Confirm Booking</span>
          <div class="spinner" id="submitSpinner" style="display:none;"></div>
        </button>
      </div>
    </section>

    <!-- Success Screen -->
    <section class="book-section" id="stepSuccess">
      <div class="success-container">
        <div class="success-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
            <path d="M20 6L9 17l-5-5"/>
          </svg>
        </div>
        <h2 class="success-title">Appointment Requested!</h2>
        <p class="success-message">We've received your booking request and sent a confirmation to your email.</p>

        <!-- Email Sent Badge -->
        <div style="display: inline-flex; align-items: center; gap: 8px; background: rgba(34, 197, 94, 0.15); border: 1px solid rgba(34, 197, 94, 0.3); padding: 10px 16px; border-radius: 20px; margin-bottom: 24px;">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#22c55e" stroke-width="2">
            <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
          </svg>
          <span style="color: #22c55e; font-size: 13px; font-weight: 600;">Confirmation email sent to <span id="successEmail" style="color: #fff;">your inbox</span></span>
        </div>

        <div class="success-details">
          <div class="success-detail">
            <div class="success-detail-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="4" width="18" height="18" rx="2"/>
                <line x1="16" y1="2" x2="16" y2="6"/>
                <line x1="8" y1="2" x2="8" y2="6"/>
                <line x1="3" y1="10" x2="21" y2="10"/>
              </svg>
            </div>
            <div class="success-detail-text">
              <div class="success-detail-label">Date & Time</div>
              <div class="success-detail-value" id="successDateTime">-</div>
            </div>
          </div>
          <div class="success-detail">
            <div class="success-detail-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                <circle cx="12" cy="10" r="3"/>
              </svg>
            </div>
            <div class="success-detail-text">
              <div class="success-detail-label">Location</div>
              <div class="success-detail-value" id="successAddress">-</div>
            </div>
          </div>
        </div>

        <!-- What's Next Section -->
        <div class="whats-next">
          <h3>What's Next?</h3>
          <div class="next-steps">
            <div class="next-step">
              <div class="next-step-num">1</div>
              <div class="next-step-text">We'll call to confirm your appointment within 24 hours</div>
            </div>
            <div class="next-step">
              <div class="next-step-num">2</div>
              <div class="next-step-text">Our expert will visit your home at the scheduled time</div>
            </div>
            <div class="next-step">
              <div class="next-step-num">3</div>
              <div class="next-step-text">You'll receive a detailed quote with material options</div>
            </div>
          </div>
        </div>

        <div class="success-actions">
          <a href="/" class="book-btn primary" style="display:inline-flex; text-decoration:none;">
            Return to Home
          </a>
          <a href="tel:+16028333189" class="book-btn secondary" style="display:inline-flex; text-decoration:none;">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/>
            </svg>
            Call Us Now
          </a>
        </div>
      </div>
    </section>
  </main>

  <!-- Calendar Script - runs first, no dependencies -->
  <script>
  (function() {
    'use strict';

    // State
    let currentDate = new Date();
    let selectedDate = null;
    let selectedTime = null;

    // Available time slots
    const timeSlots = ['9:00 AM', '10:00 AM', '11:00 AM', '12:00 PM', '1:00 PM', '2:00 PM', '3:00 PM', '4:00 PM'];
    const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];

    // Render Calendar
    function renderCalendar() {
      const calendarMonth = document.getElementById('calendarMonth');
      const calendarDays = document.getElementById('calendarDays');
      const prevBtn = document.getElementById('prevMonth');

      if (!calendarMonth || !calendarDays) {
        console.error('Calendar elements not found');
        return;
      }

      const year = currentDate.getFullYear();
      const month = currentDate.getMonth();

      // Update month display
      calendarMonth.textContent = monthNames[month] + ' ' + year;

      // Get first day of month and total days
      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month + 1, 0).getDate();
      const today = new Date();
      today.setHours(0, 0, 0, 0);

      // Clear previous
      calendarDays.innerHTML = '';

      // Add empty days for first week
      for (let i = 0; i < firstDay; i++) {
        const emptyDay = document.createElement('button');
        emptyDay.className = 'calendar-day other-month';
        emptyDay.disabled = true;
        calendarDays.appendChild(emptyDay);
      }

      // Add days
      for (let day = 1; day <= daysInMonth; day++) {
        const dateBtn = document.createElement('button');
        dateBtn.className = 'calendar-day';
        dateBtn.textContent = day;

        const thisDate = new Date(year, month, day);
        thisDate.setHours(0, 0, 0, 0);

        // Disable past dates and Sundays
        if (thisDate < today || thisDate.getDay() === 0) {
          dateBtn.disabled = true;
        }

        // Mark today
        if (thisDate.getTime() === today.getTime()) {
          dateBtn.classList.add('today');
        }

        // Mark selected
        if (selectedDate && thisDate.getTime() === selectedDate.getTime()) {
          dateBtn.classList.add('selected');
        }

        dateBtn.addEventListener('click', function() {
          selectDate(thisDate);
        });
        calendarDays.appendChild(dateBtn);
      }

      // Disable prev button if current month
      const thisMonth = new Date();
      thisMonth.setDate(1);
      thisMonth.setHours(0, 0, 0, 0);
      const currentMonth = new Date(year, month, 1);
      if (prevBtn) prevBtn.disabled = currentMonth <= thisMonth;
    }

    // Select Date
    function selectDate(date) {
      selectedDate = date;
      selectedTime = null;
      renderCalendar();

      const timeSlotsContainer = document.getElementById('timeSlots');
      const selectedDateText = document.getElementById('selectedDateText');
      const timeSlotsGrid = document.getElementById('timeSlotsGrid');

      // Show time slots
      const options = { weekday: 'long', month: 'long', day: 'numeric' };
      if (selectedDateText) selectedDateText.textContent = date.toLocaleDateString('en-US', options);
      renderTimeSlots();
      if (timeSlotsContainer) timeSlotsContainer.style.display = 'block';
      updateStep1Button();
    }

    // Render Time Slots
    function renderTimeSlots() {
      const timeSlotsGrid = document.getElementById('timeSlotsGrid');
      if (!timeSlotsGrid) return;

      timeSlotsGrid.innerHTML = '';
      timeSlots.forEach(function(time) {
        const btn = document.createElement('button');
        btn.className = 'time-slot';
        btn.textContent = time;
        if (selectedTime === time) btn.classList.add('selected');
        btn.addEventListener('click', function() {
          selectedTime = time;
          renderTimeSlots();
          updateStep1Button();
        });
        timeSlotsGrid.appendChild(btn);
      });
    }

    // Update Step 1 Button
    function updateStep1Button() {
      const btn = document.getElementById('toStep2');
      if (btn) btn.disabled = !selectedDate || !selectedTime;
    }

    // Format date for display
    function formatDate(date) {
      const options = { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' };
      return date.toLocaleDateString('en-US', options);
    }

    // Make functions globally available
    window.BookingCalendar = {
      currentDate: function() { return currentDate; },
      selectedDate: function() { return selectedDate; },
      selectedTime: function() { return selectedTime; },
      formatDate: formatDate,
      renderCalendar: renderCalendar,
      prev: function() { currentDate.setMonth(currentDate.getMonth() - 1); renderCalendar(); },
      next: function() { currentDate.setMonth(currentDate.getMonth() + 1); renderCalendar(); }
    };

    // Initialize when DOM ready
    document.addEventListener('DOMContentLoaded', function() {
      console.log('Initializing calendar...');
      renderCalendar();

      // Nav buttons
      var prevBtn = document.getElementById('prevMonth');
      var nextBtn = document.getElementById('nextMonth');
      if (prevBtn) prevBtn.addEventListener('click', function() { window.BookingCalendar.prev(); });
      if (nextBtn) nextBtn.addEventListener('click', function() { window.BookingCalendar.next(); });

      console.log('Calendar initialized');
    });
  })();
  </script>

  <!-- Supabase - use global client from unified-nav -->
  <script>
    // Supabase Config - use global client to avoid duplicate declarations
    const SUPABASE_URL = 'https://ypeypgwsycxcagncgdur.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlwZXlwZ3dzeWN4Y2FnbmNnZHVyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc3NTQ4MjMsImV4cCI6MjA4MzMzMDgyM30.R13pNv2FDtGhfeu7gUcttYNrQAbNYitqR4FIq3O2-ME';

    function getSupabaseClient() {
      if (window._sgSupabaseClient) return window._sgSupabaseClient;
      if (window.supabase && window.supabase.createClient) {
        window._sgSupabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY, {
          auth: { persistSession: true, autoRefreshToken: true }
        });
        return window._sgSupabaseClient;
      }
      return null;
    }

    // Get booking calendar state (from the calendar module)
    function getSelectedDate() { return window.BookingCalendar ? window.BookingCalendar.selectedDate() : null; }
    function getSelectedTime() { return window.BookingCalendar ? window.BookingCalendar.selectedTime() : null; }
    function formatDate(date) { return window.BookingCalendar ? window.BookingCalendar.formatDate(date) : date.toLocaleDateString(); }

    // Step Navigation
    function showStep(stepNum) {
      document.querySelectorAll('.book-section').forEach(s => s.classList.remove('active'));
      document.getElementById(`step${stepNum}`).classList.add('active');

      document.querySelectorAll('.progress-step').forEach((step, i) => {
        step.classList.remove('active', 'completed');
        if (i + 1 < stepNum) step.classList.add('completed');
        if (i + 1 === stepNum) step.classList.add('active');
      });
    }

    function showSuccess() {
      document.querySelectorAll('.book-section').forEach(s => s.classList.remove('active'));
      document.getElementById('stepSuccess').classList.add('active');
      document.querySelectorAll('.progress-step').forEach(step => step.classList.add('completed'));
    }

    // Initialize step navigation when DOM is ready
    document.addEventListener('DOMContentLoaded', function() {
      console.log('Setting up step navigation...');

      // Step 1 -> Step 2
      var toStep2Btn = document.getElementById('toStep2');
      if (toStep2Btn) {
        toStep2Btn.addEventListener('click', function() {
          var selDate = getSelectedDate();
          var selTime = getSelectedTime();
          if (selDate && selTime) {
            document.getElementById('summaryDate').textContent = formatDate(selDate);
            document.getElementById('summaryTime').textContent = selTime;
            showStep(2);
          }
        });
      }

      // Step 2 -> Step 1
      var backToStep1Btn = document.getElementById('backToStep1');
      if (backToStep1Btn) {
        backToStep1Btn.addEventListener('click', function() {
          showStep(1);
        });
      }

      // Step 2 -> Step 3
      var toStep3Btn = document.getElementById('toStep3');
      if (toStep3Btn) {
        toStep3Btn.addEventListener('click', function() {
          var name = document.getElementById('inputName').value.trim();
          var phone = document.getElementById('inputPhone').value.trim();
          var email = document.getElementById('inputEmail').value.trim();

          // Collect address fields
          var street = document.getElementById('inputStreet').value.trim();
          var street2 = document.getElementById('inputStreet2').value.trim();
          var city = document.getElementById('inputCity').value.trim();
          var state = document.getElementById('inputState').value;
          var zip = document.getElementById('inputZip').value.trim();

          // Build full address string
          var address = street;
          if (street2) address += ' ' + street2;
          address += ', ' + city + ', ' + state + ' ' + zip;

          // Set hidden field for backward compatibility
          document.getElementById('inputAddress').value = address;

          if (!name || !phone || !email || !street || !city || !zip) {
            alert('Please fill in all required fields.');
            return;
          }

          var selDate = getSelectedDate();
          var selTime = getSelectedTime();

          document.getElementById('confirmDate').textContent = formatDate(selDate);
          document.getElementById('confirmTime').textContent = selTime;
          document.getElementById('confirmName').textContent = name;
          document.getElementById('confirmPhone').textContent = phone;
          document.getElementById('confirmEmail').textContent = email;
          document.getElementById('confirmAddress').textContent = address;

          var projectType = document.getElementById('inputProjectType').value;
          var projectMap = {
            'kitchen': 'Kitchen Countertops',
            'bathroom': 'Bathroom Vanity',
            'outdoor': 'Outdoor Kitchen',
            'flooring': 'Flooring',
            'tile': 'Tile/Backsplash',
            'other': 'Other'
          };
          document.getElementById('confirmProject').textContent = projectMap[projectType] || 'Not specified';

          showStep(3);
        });
      }

      // Step 3 -> Step 2
      var backToStep2Btn = document.getElementById('backToStep2');
      if (backToStep2Btn) {
        backToStep2Btn.addEventListener('click', function() {
          showStep(2);
        });
      }

      // Submit Booking
      var submitBookingBtn = document.getElementById('submitBooking');
      if (submitBookingBtn) {
        submitBookingBtn.addEventListener('click', async function() {
          var submitBtn = document.getElementById('submitBooking');
          var submitText = document.getElementById('submitText');
          var submitSpinner = document.getElementById('submitSpinner');

          submitBtn.disabled = true;
          submitText.style.display = 'none';
          submitSpinner.style.display = 'block';

          try {
            var fullName = document.getElementById('inputName').value.trim();
            var nameParts = fullName.split(' ');
            var firstName = nameParts[0] || '';
            var lastName = nameParts.slice(1).join(' ') || '';

            var selDate = getSelectedDate();
            var selTime = getSelectedTime();

            var appointmentDetails = {
              preferred_date: selDate.toISOString().split('T')[0],
              preferred_time: selTime,
              formatted_date: formatDate(selDate),
              project_address: document.getElementById('inputAddress').value.trim(),
              estimated_sqft: document.getElementById('inputSqft').value.trim() || null,
              appointment_type: 'free_estimate'
            };

            // Get address fields for structured data
            var street = document.getElementById('inputStreet').value.trim();
            var street2 = document.getElementById('inputStreet2').value.trim();
            var city = document.getElementById('inputCity').value.trim();
            var state = document.getElementById('inputState').value;
            var zipCode = document.getElementById('inputZip').value.trim();

            var leadData = {
              first_name: firstName,
              last_name: lastName,
              full_name: fullName,
              email: document.getElementById('inputEmail').value.trim(),
              phone: document.getElementById('inputPhone').value.trim(),
              zip_code: zipCode,
              project_type: document.getElementById('inputProjectType').value || 'Not specified',
              message: 'APPOINTMENT REQUEST\nDate: ' + formatDate(selDate) + '\nTime: ' + selTime + '\nAddress: ' + document.getElementById('inputAddress').value.trim() + '\n\n' + (document.getElementById('inputNotes').value.trim() || ''),
              source: 'Booking Calendar',
              form_name: 'appointment-booking',
              page_url: window.location.href,
              status: 'new',
              service_address: {
                street: street,
                street2: street2 || null,
                city: city,
                state: state,
                zip: zipCode
              },
              raw_data: appointmentDetails
            };

            var response = await fetch(SUPABASE_URL + '/rest/v1/leads', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                'apikey': SUPABASE_ANON_KEY,
                'Prefer': 'return=minimal'
              },
              body: JSON.stringify(leadData)
            });

            if (!response.ok) {
              throw new Error('Failed to submit booking');
            }

            document.getElementById('successDateTime').textContent = formatDate(selDate) + ' at ' + selTime;
            document.getElementById('successAddress').textContent = document.getElementById('inputAddress').value.trim();
            document.getElementById('successEmail').textContent = document.getElementById('inputEmail').value.trim();

            showSuccess();
            await sendNotificationEmail(leadData);

          } catch (error) {
            console.error('Booking error:', error);
            alert('Something went wrong. Please try again or call us at (602) 833-3189.');
            submitBtn.disabled = false;
            submitText.style.display = 'inline';
            submitSpinner.style.display = 'none';
          }
        });
      }

      console.log('Step navigation ready');
    });

    // Send notification email via API
    async function sendNotificationEmail(data) {
      try {
        // Send to email notification API
        const response = await fetch('https://surprise-granite-email-api.onrender.com/api/leads', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            homeowner_name: data.full_name || data.name,
            homeowner_email: data.email,
            homeowner_phone: data.phone,
            project_type: data.project_type || 'Free Estimate',
            project_zip: '85374',
            project_timeline: 'ASAP',
            message: data.message,
            source: 'Booking Calendar',
            appointment_date: data.raw_data?.preferred_date,
            appointment_time: data.raw_data?.preferred_time,
            project_address: data.raw_data?.project_address
          })
        });

        if (response.ok) {
          console.log('Notification sent successfully');
        }
      } catch (e) {
        // Notification failed but appointment is saved to Supabase
        console.log('Could not send notification, appointment saved to database');
      }

      // Also send to CRM webhook
      try {
        await fetch('https://voiceflow-crm.onrender.com/api/webhooks/website-lead', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            name: data.full_name || data.name,
            email: data.email,
            phone: data.phone,
            project_type: data.project_type,
            source: 'Booking Calendar',
            message: data.message,
            appointment_date: data.raw_data?.preferred_date,
            appointment_time: data.raw_data?.preferred_time
          })
        });
      } catch (e) {
        console.log('CRM webhook failed');
      }
    }

  </script>

  <!-- Remodely AI Widgets (Aria Voice) -->
  <script defer src="../js/remodely-widgets.js?v=20260113b"></script>

  <!-- Remodely Tools Hub -->
  <script defer src="../js/remodely-hub.js?v=20260118"></script>
</body>
</html>
