<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout | Surprise Granite</title>
  <meta name="description" content="Complete your purchase securely with Stripe.">
  <link rel="canonical" href="https://surprisegranite.com/checkout/">
  <link rel="icon" href="https://cdn.prod.website-files.com/6456ce4476abb25581fbad0c/6456ce4476abb269c6fbb176_Surprise-Granite-favicon-32x32px.png">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="/css/unified-nav.css?v=20260111c">
  <link rel="stylesheet" href="/css/design-system.css?v=20260111c">
  <script defer src="/js/unified-nav.js?v=20260111c"></script>
  <link rel="stylesheet" href="/css/checkout.css?v=20260111c">

  <!-- Stripe -->
  <script src="https://js.stripe.com/v3/"></script>

  <!-- Supabase for auth -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
  <!-- Navigation will be injected by unified-nav.js -->

  <main class="checkout-page">
    <div class="checkout-container">
      <!-- Back to Cart -->
      <a href="/cart/" class="back-link">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
        Back to Cart
      </a>

      <!-- Progress Steps -->
      <div class="checkout-progress">
        <div class="progress-step completed">
          <span class="progress-step-number">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
              <path d="M20 6L9 17l-5-5"/>
            </svg>
          </span>
          <span>Cart</span>
        </div>
        <div class="progress-divider completed"></div>
        <div class="progress-step active">
          <span class="progress-step-number">2</span>
          <span>Checkout</span>
        </div>
        <div class="progress-divider"></div>
        <div class="progress-step">
          <span class="progress-step-number">3</span>
          <span>Confirmation</span>
        </div>
      </div>

      <div class="checkout-content">
        <!-- Checkout Form -->
        <div class="checkout-form-section">
          <h1>Checkout</h1>
          <p class="checkout-subtitle">Complete your order securely</p>

          <!-- Contact Information -->
          <div class="form-section">
            <div class="form-section-header">
              <div class="form-section-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                  <circle cx="12" cy="7" r="4"/>
                </svg>
              </div>
              <div>
                <h2>Contact Information</h2>
                <p class="form-section-subtitle">We'll use this to send order updates</p>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group full-width">
                <label for="email">Email <span class="required">*</span></label>
                <input type="email" id="email" name="email" required placeholder="your@email.com">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="firstName">First Name <span class="required">*</span></label>
                <input type="text" id="firstName" name="firstName" required>
              </div>
              <div class="form-group">
                <label for="lastName">Last Name <span class="required">*</span></label>
                <input type="text" id="lastName" name="lastName" required>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group full-width">
                <label for="phone">Phone</label>
                <input type="tel" id="phone" name="phone" placeholder="(555) 555-5555">
              </div>
            </div>
          </div>

          <!-- Shipping Address -->
          <div class="form-section">
            <div class="form-section-header">
              <div class="form-section-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                  <circle cx="12" cy="10" r="3"/>
                </svg>
              </div>
              <div>
                <h2>Shipping Address</h2>
                <p class="form-section-subtitle">Where should we deliver your order?</p>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group full-width">
                <label for="address">Street Address <span class="required">*</span></label>
                <input type="text" id="address" name="address" required placeholder="123 Main Street">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group full-width">
                <label for="address2">Apartment, suite, etc. (optional)</label>
                <input type="text" id="address2" name="address2" placeholder="Apt 4B">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="city">City <span class="required">*</span></label>
                <input type="text" id="city" name="city" required>
              </div>
              <div class="form-group">
                <label for="state">State <span class="required">*</span></label>
                <select id="state" name="state" required>
                  <option value="">Select...</option>
                  <option value="AZ">Arizona</option>
                  <option value="CA">California</option>
                  <option value="CO">Colorado</option>
                  <option value="NV">Nevada</option>
                  <option value="NM">New Mexico</option>
                  <option value="TX">Texas</option>
                  <option value="UT">Utah</option>
                </select>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="zip">ZIP Code <span class="required">*</span></label>
                <input type="text" id="zip" name="zip" required pattern="[0-9]{5}" maxlength="5" placeholder="85374">
              </div>
              <div class="form-group">
                <label for="country">Country</label>
                <select id="country" name="country" required>
                  <option value="US" selected>United States</option>
                </select>
              </div>
            </div>

            <!-- Billing Address Toggle -->
            <div class="checkbox-group" id="billingToggle">
              <input type="checkbox" id="sameAsShipping" name="sameAsShipping" checked>
              <label for="sameAsShipping">
                Billing address same as shipping
                <span class="checkbox-description">Uncheck if your billing address is different</span>
              </label>
            </div>

            <!-- Billing Address (hidden by default) -->
            <div class="billing-address-section" id="billingAddressSection">
              <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 20px; color: var(--text-primary);">Billing Address</h3>
              <div class="form-row">
                <div class="form-group full-width">
                  <label for="billingAddress">Street Address <span class="required">*</span></label>
                  <input type="text" id="billingAddress" name="billingAddress" placeholder="123 Main Street">
                </div>
              </div>
              <div class="form-row">
                <div class="form-group full-width">
                  <label for="billingAddress2">Apartment, suite, etc. (optional)</label>
                  <input type="text" id="billingAddress2" name="billingAddress2" placeholder="Apt 4B">
                </div>
              </div>
              <div class="form-row">
                <div class="form-group">
                  <label for="billingCity">City <span class="required">*</span></label>
                  <input type="text" id="billingCity" name="billingCity">
                </div>
                <div class="form-group">
                  <label for="billingState">State <span class="required">*</span></label>
                  <select id="billingState" name="billingState">
                    <option value="">Select...</option>
                    <option value="AZ">Arizona</option>
                    <option value="CA">California</option>
                    <option value="CO">Colorado</option>
                    <option value="NV">Nevada</option>
                    <option value="NM">New Mexico</option>
                    <option value="TX">Texas</option>
                    <option value="UT">Utah</option>
                  </select>
                </div>
              </div>
              <div class="form-row">
                <div class="form-group">
                  <label for="billingZip">ZIP Code <span class="required">*</span></label>
                  <input type="text" id="billingZip" name="billingZip" pattern="[0-9]{5}" maxlength="5" placeholder="85374">
                </div>
                <div class="form-group">
                  <label for="billingCountry">Country</label>
                  <select id="billingCountry" name="billingCountry">
                    <option value="US" selected>United States</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <!-- Payment -->
          <div class="form-section">
            <div class="form-section-header">
              <div class="form-section-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
                  <line x1="1" y1="10" x2="23" y2="10"/>
                </svg>
              </div>
              <div>
                <h2>Payment</h2>
                <p class="form-section-subtitle">All transactions are secure and encrypted</p>
              </div>
            </div>

            <!-- Accepted Payment Methods -->
            <div class="accepted-payments">
              <span class="accepted-label">We accept:</span>
              <div class="payment-icons">
                <img src="https://raw.githubusercontent.com/aaronfagan/svg-credit-card-payment-icons/main/flat-rounded/visa.svg" alt="Visa" height="32">
                <img src="https://raw.githubusercontent.com/aaronfagan/svg-credit-card-payment-icons/main/flat-rounded/mastercard.svg" alt="Mastercard" height="32">
                <img src="https://raw.githubusercontent.com/aaronfagan/svg-credit-card-payment-icons/main/flat-rounded/amex.svg" alt="American Express" height="32">
                <img src="https://raw.githubusercontent.com/aaronfagan/svg-credit-card-payment-icons/main/flat-rounded/discover.svg" alt="Discover" height="32">
                <img src="https://raw.githubusercontent.com/aaronfagan/svg-credit-card-payment-icons/main/flat-rounded/paypal.svg" alt="PayPal" height="32">
                <svg viewBox="0 0 50 34" height="32" aria-label="Apple Pay" style="border-radius:6px;box-shadow:0 2px 4px rgba(0,0,0,0.1)"><rect width="50" height="34" rx="4" fill="#000"/><path d="M15.2 11.2c-.4.5-.9.8-1.5.8-.1-.6.2-1.2.5-1.6.3-.4.9-.8 1.4-.8.1.5-.2 1.1-.4 1.6zm.4 1.9c-.8 0-1.6.5-2 .5s-1.1-.5-1.8-.5c-.9 0-1.8.5-2.3 1.4-1 1.7-.3 4.3.7 5.7.5.7 1 1.5 1.8 1.5s1-.5 1.9-.5c.9 0 1.1.5 1.9.5s1.3-.7 1.8-1.4c.5-.8.7-1.6.7-1.6s-1.4-.5-1.4-2.1c0-1.3.9-1.9 1-2-.6-.8-1.4-1-1.8-1h-.5zm8.4-.9v9h1.4v-3.1h2c1.8 0 3.1-1.2 3.1-3s-1.2-2.9-3-2.9h-3.5zm1.4 1.2h1.6c1.2 0 1.9.6 1.9 1.8s-.7 1.8-1.9 1.8H25.4v-3.6zm8.6 7.9c.9 0 1.8-.5 2.1-1.2h0v1.1h1.3v-4.5c0-1.3-1-2.2-2.7-2.2-1.5 0-2.6.8-2.6 2h1.2c.1-.6.6-.9 1.4-.9.9 0 1.4.4 1.4 1.2v.5l-1.9.1c-1.7.1-2.7.8-2.7 2.1 0 1.3 1 2.1 2.4 2.1h.1zm.4-1.1c-.8 0-1.3-.4-1.3-1s.5-1 1.4-1.1l1.7-.1v.5c0 1-.8 1.7-1.8 1.7zm4.8 2.7c1.3 0 1.9-.5 2.5-2l2.4-6.6H40l-1.6 5.1h0l-1.6-5.1h-1.4l2.3 6.4-.1.4c-.2.7-.6 1-1.2 1h-.5v1.1c.1 0 .4 0 .6 0h0z" fill="#fff"/></svg>
              </div>
            </div>

            <!-- Stripe Payment Element will be mounted here -->
            <div id="payment-element"></div>

            <!-- Payment errors -->
            <div id="payment-errors" class="payment-errors" role="alert"></div>
          </div>

          <!-- Submit Button -->
          <button type="submit" id="submit-button" class="submit-button" disabled>
            <span id="button-text">Pay Now</span>
            <span id="spinner" class="spinner hidden"></span>
          </button>

          <!-- Security Note -->
          <div class="security-note">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="#22c55e">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
            </svg>
            <span>Your payment is secured by Stripe</span>
          </div>

          <!-- Trust Badges -->
          <div class="trust-badges">
            <div class="trust-badge">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
              </svg>
              <span>SSL Encrypted</span>
            </div>
            <div class="trust-badge">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
              </svg>
              <span>Secure Checkout</span>
            </div>
            <div class="trust-badge">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                <polyline points="22 4 12 14.01 9 11.01"/>
              </svg>
              <span>Money-Back Guarantee</span>
            </div>
          </div>
        </div>

        <!-- Order Summary -->
        <div class="order-summary-section">
          <div class="order-summary-card">
            <h2>Order Summary</h2>

            <!-- Order Items -->
            <div class="order-items" id="orderItems">
              <!-- Items will be rendered by JS -->
            </div>

            <div class="summary-divider"></div>

            <!-- Totals -->
            <div class="summary-row">
              <span>Subtotal</span>
              <span id="summarySubtotal">$0.00</span>
            </div>
            <div class="summary-row">
              <span>Shipping</span>
              <span id="summaryShipping">Calculated</span>
            </div>
            <div class="summary-row">
              <span>Tax</span>
              <span id="summaryTax">Calculated</span>
            </div>

            <div class="summary-divider"></div>

            <div class="summary-row total">
              <span>Total</span>
              <span id="summaryTotal">$0.00</span>
            </div>

            <!-- Promo Code Applied -->
            <div class="promo-applied" id="promoApplied" style="display: none;">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="#22c55e">
                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
              </svg>
              <span id="promoText">Promo applied</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="checkout-footer">
    <div class="footer-container">
      <div class="footer-links">
        <a href="/contact-us">Contact Us</a>
        <a href="/company/about">About</a>
        <a href="/privacy-policy">Privacy Policy</a>
        <a href="/terms">Terms of Service</a>
      </div>
      <p>&copy; 2025 Surprise Granite. All rights reserved.</p>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="/js/checkout.js?v=20260109b"></script>
  <script>
    // Billing address toggle functionality
    document.addEventListener('DOMContentLoaded', function() {
      const sameAsShippingCheckbox = document.getElementById('sameAsShipping');
      const billingAddressSection = document.getElementById('billingAddressSection');
      const billingInputs = billingAddressSection ? billingAddressSection.querySelectorAll('input, select') : [];

      function toggleBillingAddress() {
        if (!billingAddressSection) return;

        if (sameAsShippingCheckbox.checked) {
          billingAddressSection.classList.remove('visible');
          // Remove required from billing inputs
          billingInputs.forEach(input => {
            input.removeAttribute('required');
          });
        } else {
          billingAddressSection.classList.add('visible');
          // Add required to billing inputs (except optional fields)
          billingInputs.forEach(input => {
            if (!input.name.includes('2')) { // Skip address2 fields
              input.setAttribute('required', '');
            }
          });
        }
      }

      if (sameAsShippingCheckbox) {
        sameAsShippingCheckbox.addEventListener('change', toggleBillingAddress);
        // Initial state
        toggleBillingAddress();
      }
    });
  </script>
</body>
</html>
